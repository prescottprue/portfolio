goog.provide("ng.material.components.tooltip"),goog.require("ng.material.core"),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(j,m,n){function o(b){o.value=!!b,o.queued||(b?(o.queued=!0,a(function(){j.visible=o.value,o.queued=!1},j.delay)):a(function(){j.visible=!1}))}function p(){s.attr("aria-describedby",m.attr("id")),x.append(m),r(),h.addClass(m,"md-show"),h.addClass(t,"md-show"),h.addClass(u,"md-show")}function q(){s.removeAttr("aria-describedby"),i.all([h.removeClass(u,"md-show"),h.removeClass(t,"md-show"),h.removeClass(m,"md-show")]).then(function(){j.visible||m.detach()})}function r(){function a(){var a="left"===v||"right"===v?2*Math.sqrt(Math.pow(d.width,2)+Math.pow(d.height/2,2)):2*Math.sqrt(Math.pow(d.width/2,2)+Math.pow(d.height,2)),b="left"===v?{left:100,top:50}:"right"===v?{left:0,top:50}:"top"===v?{left:50,top:100}:{left:50,top:0};t.css({width:a+"px",height:a+"px",left:b.left+"%",top:b.top+"%"})}function b(a){var b={left:a.left,top:a.top};return b.left=Math.min(b.left,x.prop("scrollWidth")-d.width-l),b.left=Math.max(b.left,l),b.top=Math.min(b.top,x.prop("scrollHeight")-d.height-l),b.top=Math.max(b.top,l),b}function c(a){return"left"===a?{left:f.left-d.width-l,top:f.top+f.height/2-d.height/2}:"right"===a?{left:f.left+f.width+l,top:f.top+f.height/2-d.height/2}:"top"===a?{left:f.left+f.width/2-d.width/2,top:f.top-d.height-l}:{left:f.left+f.width/2-d.width/2,top:f.top+f.height+l}}var d=e.offsetRect(m,x),f=e.offsetRect(s,x),g=c(v);v?g=b(g):g.top>x.prop("scrollHeight")-d.height-l&&(g=b(c("top"))),m.css({top:g.top+"px",left:g.left+"px"}),a()}f(m);for(var s=m.parent(),t=angular.element(m[0].getElementsByClassName("md-background")[0]),u=angular.element(m[0].getElementsByClassName("md-content")[0]),v=n.mdDirection;"none"==b.getComputedStyle(s[0])["pointer-events"];)s=s.parent();for(var w=m.parent()[0];w&&w!==g[0]&&w!==document.body&&(!w.tagName||"md-content"!=w.tagName.toLowerCase());)w=w.parentNode;var x=angular.element(w||document.body);angular.isDefined(n.mdDelay)||(j.delay=k),m.detach(),m.attr("role","tooltip"),m.attr("id",n.id||"tooltip_"+e.nextUid()),s.on("focus mouseenter touchstart",function(){o(!0)}),s.on("blur mouseleave touchend touchcancel",function(){d[0].activeElement!==s[0]&&o(!1)}),j.$watch("visible",function(a){a?p():q()});var y=c.throttle(function(){j.visible&&r()});angular.element(b).on("resize",y),j.$on("$destroy",function(){j.visible=!1,m.remove(),angular.element(b).off("resize",y)})}var k=0,l=8;return{restrict:"E",transclude:!0,template:'<div class="md-background"></div><div class="md-content" ng-transclude></div>',scope:{visible:"=?mdVisible",delay:"=?mdDelay"},link:j}}angular.module("material.components.tooltip",["material.core"]).directive("mdTooltip",a),a.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$rootElement","$animate","$q"]}();