function $UrlRouterProvider(a,b){function c(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function d(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function e(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return isDefined(d)?d:!0}function f(b,c,d,e){function f(a,b,c){return"/"===n?a:b?n.slice(0,-1)+a:c?n.slice(1)+a:a}function k(a){function c(a){var c=a(d,b);return c?(isString(c)&&b.replace().url(c),!0):!1}if(!a||!a.defaultPrevented){var e=m&&b.url()===m;if(m=void 0,e)return!0;var f,g=h.length;for(f=0;g>f;f++)if(c(h[f]))return;i&&c(i)}}function l(){return g=g||c.$on("$locationChangeSuccess",k)}var m,n=e.baseHref(),o=b.url();return j||l(),{sync:function(){k()},listen:function(){return l()},update:function(a){return a?void(o=b.url()):void(b.url()!==o&&(b.url(o),b.replace()))},push:function(a,c,d){b.url(a.format(c||{})),m=d&&d.$$avoidResync?b.url():void 0,d&&d.replace&&b.replace()},href:function(c,d,e){if(!c.validates(d))return null;var g=a.html5Mode();angular.isObject(g)&&(g=g.enabled);var h=c.format(d);if(e=e||{},g||null===h||(h="#"+a.hashPrefix()+h),h=f(h,g,e.absolute),!e.absolute||!h)return h;var i=!g&&h?"/":"",j=b.port();return j=80===j||443===j?"":":"+j,[b.protocol(),"://",b.host(),j,i,h].join("")}}}var g,h=[],i=null,j=!1;this.rule=function(a){if(!isFunction(a))throw new Error("'rule' must be a function");return h.push(a),this},this.otherwise=function(a){if(isString(a)){var b=a;a=function(){return b}}else if(!isFunction(a))throw new Error("'rule' must be a function");return i=a,this},this.when=function(a,f){var g,h=isString(f);if(isString(a)&&(a=b.compile(a)),!h&&!isFunction(f)&&!isArray(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,c){return h&&(g=b.compile(c),c=["$match",function(a){return g.format(a)}]),extend(function(b,d){return e(b,c,a.exec(d.path(),d.search()))},{prefix:isString(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=b,b=["$match",function(a){return d(g,a)}]),extend(function(c,d){return e(c,b,a.exec(d.path()))},{prefix:c(a)})}},j={matcher:b.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,f));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){void 0===a&&(a=!0),j=a},this.$get=f,f.$inject=["$location","$rootScope","$injector","$browser"]}$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider);